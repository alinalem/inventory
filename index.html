<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Samsung Product Stock Checker</title>
  <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
          rel="stylesheet"
  >
  <style>
    body { padding: 2rem; }
    .table td, .table th { vertical-align: middle; }
  </style>
</head>
<body>
<div class="container">
  <h2 class="mb-4">Samsung Product Stock Status</h2>
  <table class="table table-bordered table-hover">
    <thead class="table-dark">
    <tr>
      <th>Product Code</th>
      <th>Product Name</th>
      <th>Stock Status</th>
      <th>Stock Level</th>
      <th>Price</th>
      <th>Expected Price</th>
    </tr>
    </thead>
    <tbody id="productTableBody"></tbody>
  </table>
</div>

<script>
  const productCodes = [
  "SM-F761BZKGEUB",
  "SM-F761BZKHEUB",
  "SM-S936BDBDEUB",
  "SM-F766BDBHEUB",
  "SM-F966BLGBEUB"
];

  const productInfoMap = {
  "SM-F761BZKGEUB": {
    "name": "Galaxy Z Flip7 FE 256 GB BLACK",
    "expectedPrice": 999
  },
  "SM-F761BZKHEUB": {
    "name": "Galaxy Z Flip7 FE 521 GB BLACK",
    "expectedPrice": 999
  },
  "SM-S936BDBDEUB": {
    "name": "Galffaxy Z Flip7 FE 521 GB BLACK",
    "expectedPrice": 949
  },
  "SM-F766BDBHEUB": {
    "name": "Galaxy Z Flip7 521 GB BLUESHADOW",
    "expectedPrice": 1199
  },
  "SM-F966BLGBEUB": {
    "name": "Galaxy Z Fold7 (Online Exclusive) 256 GB MINT",
    "expectedPrice": 2099
  }
};

  fetch(`https://api.shop.samsung.com/tokocommercewebservices/v2/nl/products?productCodes=${productCodes.join(',')}`)
    .then(res => res.json())
    .then(data => {
      const tbody = document.getElementById("productTableBody");

      data.forEach(product => {
        const row = document.createElement("tr");

        const productInfo = productInfoMap[product.code] || {};
        const expectedPrice = productInfo.expectedPrice;
        const actualPrice = product.price?.value;

        let rowClass = "table-danger";

        if (product.stock?.stockLevelStatus === "inStock") {
          rowClass = actualPrice === expectedPrice ? "table-success" : "table-danger";
        } else {
          rowClass = "table-warning";
        }

        row.classList.add(rowClass);

        const productName = productInfo.name || "(Unknown)";

        row.innerHTML = `
          <td>${product.code}</td>
          <td>${productName}</td>
          <td>${product.stock?.stockLevelStatus || "n/a"}</td>
          <td>${product.stock?.stockLevel ?? "n/a"}</td>
          <td>${product.price?.formattedValue || "n/a"}</td>
          <td>€ ${expectedPrice ?? "n/a"}</td>
        `;

        tbody.appendChild(row);
      });
    })
    .catch(err => {
      console.error("Ошибка загрузки данных:", err);
    });
</script>
</body>
</html>